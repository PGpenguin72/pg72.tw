---
import { getEntry, render } from "astro:content";
import Markdown from "@components/misc/Markdown.astro";
import { Icon } from "astro-icon/components";
import I18nKey from "../i18n/i18nKey";
import { i18n } from "../i18n/translation";
import MainGridLayout from "../layouts/MainGridLayout.astro";

const linksPost = await getEntry("spec", "links");

if (!linksPost) {
	throw new Error("Links page content not found");
}

const { Content } = await render(linksPost);

const links = [
	{
		name: "GitHub",
		icon: "fa6-brands:github",
		url: "https://github.com/PGpenguin72",
		handle: "PGpenguin72",
		meta: ["開源與專案展示"],
	},
	{
		name: "Instagram",
		icon: "fa6-brands:instagram",
		url: "https://www.instagram.com/pg_penguin_72/",
		handle: "pg_penguin_72",
		meta: ["日常與創作"],
	},
	{
		name: "Discord",
		icon: "fa6-brands:discord",
		url: "https://discord.com/users/609189792571457550",
		handle: "PG企鵝#4855",
		meta: ["私訊最快的地方"],
	},
	{
		name: "YouTube",
		icon: "fa6-brands:youtube",
		url: "https://www.youtube.com/@PG%E4%BC%81%E9%B5%9D",
		handle: "PG企鵝",
		meta: ["主頻道"],
	},
	{
		name: "YouTube",
		icon: "fa6-brands:youtube",
		url: "https://www.youtube.com/@FX24%E5%B0%8F%E6%99%82%E5%9C%B0%E9%9C%87%E7%B4%80%E9%8C%84",
		handle: "FX24小時地震紀錄",
		meta: ["副頻道"],
	},
	{
		name: "Twitch",
		icon: "fa6-brands:twitch",
		url: "https://www.twitch.tv/pg_penguin_72",
		handle: "pg_penguin_72",
		meta: ["不定期開台"],
	},
	{
		name: "Twitter",
		icon: "fa6-brands:twitter",
		url: "https://twitter.com/PGpenguin72",
		handle: "@PGpenguin72",
		meta: ["隨手更新"],
	},
	{
		name: "Steam",
		icon: "fa6-brands:steam",
		url: "https://steamcommunity.com/id/PGpenguin72/",
		handle: "PGpenguin72",
		meta: ["遊戲","自 2021/06/01 成為成員",
		],
	},
	{
		name: "Spotify",
		icon: "fa6-brands:spotify",
		url: "https://open.spotify.com/user/317hugwguisn3cjwahtkhqsc7gxu",
		handle: "企鵝",
		meta: ["歌單與喜好"],
	},
	{
		name: "Facebook",
		icon: "fa6-brands:facebook",
		url: "https://www.facebook.com/pgpenguin72",
		handle: "PGpenguin72",
		meta: ["個人檔案"],
	},
	{
		name: "Xbox",
		icon: "fa6-brands:xbox",
		url: "https://account.xbox.com/en-us/profile?gamertag=penguin5325",
		handle: "penguin5325",
		meta: ["遊戲帳號"],
	},
	},
];
---
<MainGridLayout title={i18n(I18nKey.links)} description={i18n(I18nKey.links)}>
	<div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
		<div class="card-base z-10 px-9 py-6 relative w-full ">
			<Markdown class="mt-2">
				<Content />
			</Markdown>
			<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
				{links.map((item) =>
					item.url ? (
						<a
							rel="me"
							aria-label={item.name}
							href={item.url}
							target="_blank"
							class="group block w-full card-base rounded-2xl border border-black/5 dark:border-white/10 transition hover:bg-[var(--btn-card-bg-hover)] active:bg-[var(--btn-card-bg-active)] text-[var(--card-text)]"
						>
							<div class="flex items-center gap-4 px-5 py-4">
								<div class="btn-regular rounded-xl h-12 w-12 shrink-0 grid place-items-center">
									<Icon name={item.icon} class="text-[1.6rem]"></Icon>
								</div>
								<div class="min-w-0">
									<div class="font-semibold text-lg leading-tight">{item.name}</div>
									{item.handle && (
										<div class="text-sm text-[var(--card-text-muted)] truncate">
											{item.handle} →
										</div>
									)}
									{item.meta?.map((line) => (
										<div class="text-sm text-[var(--card-text-muted)] truncate">
											{line}
										</div>
									))}
								</div>
							</div>
						</a>
					) : (
						<div class="group block w-full card-base rounded-2xl border border-black/5 dark:border-white/10 text-[var(--card-text)]">
							<div class="flex items-center gap-4 px-5 py-4">
								<div class="btn-regular rounded-xl h-12 w-12 shrink-0 grid place-items-center">
									<Icon name={item.icon} class="text-[1.6rem]"></Icon>
								</div>
								<div class="min-w-0">
									<div class="font-semibold text-lg leading-tight">{item.name}</div>
									{item.handle && (
										<div class="text-sm text-[var(--card-text-muted)] truncate">
											{item.handle}
										</div>
									)}
									{item.meta?.map((line) => (
										<div class="text-sm text-[var(--card-text-muted)] truncate">
											{line}
										</div>
									))}
								</div>
							</div>
						</div>
					),
				)}
			</div>
		</div>
	</div>
</MainGridLayout>
