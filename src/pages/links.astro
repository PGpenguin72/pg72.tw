---
import { getEntry, render } from "astro:content";
import Markdown from "@components/misc/Markdown.astro";
import { Icon } from "astro-icon/components";
import { profileConfig } from "../config";
import I18nKey from "../i18n/i18nKey";
import { i18n } from "../i18n/translation";
import MainGridLayout from "../layouts/MainGridLayout.astro";

const linksPost = await getEntry("spec", "links");

if (!linksPost) {
	throw new Error("Links page content not found");
}

const { Content } = await render(linksPost);
---
<MainGridLayout title={i18n(I18nKey.links)} description={i18n(I18nKey.links)}>
	<div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
		<div class="card-base z-10 px-9 py-6 relative w-full ">
			<Markdown class="mt-2">
				<Content />
			</Markdown>
			<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
				{profileConfig.links.map((item) => (
					<a
						rel="me"
						aria-label={item.name}
						href={item.url}
						target="_blank"
						class="group block w-full card-base rounded-2xl border border-black/5 dark:border-white/10 transition hover:bg-[var(--btn-card-bg-hover)] active:bg-[var(--btn-card-bg-active)] text-[var(--card-text)]"
					>
						<div class="flex items-center gap-4 px-5 py-4">
							<div class="btn-regular rounded-xl h-12 w-12 shrink-0 grid place-items-center">
								<Icon name={item.icon} class="text-[1.6rem]"></Icon>
							</div>
							<div class="min-w-0">
								<div class="font-semibold text-lg">{item.name}</div>
								<div class="text-sm text-[var(--card-text-muted)] truncate">
									{item.url.replace(/^https?:\/\//, "")}
								</div>
							</div>
						</div>
					</a>
				))}
			</div>
		</div>
	</div>
</MainGridLayout>
